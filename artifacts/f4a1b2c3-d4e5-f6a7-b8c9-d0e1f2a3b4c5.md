# SQL Schema for E-commerce Platform

## Overview
This SQL schema is designed for an e-commerce platform targeting pet owners and children. It supports user profiles, session handling, and various user interactions. The schema consists of multiple tables that manage user data, pet details, user interactions, matchmaking criteria, and session information.

## SQL Schema

### 1. Users Table
Stores information about users on the platform.

```sql
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    user_role ENUM('pet_owner', 'child') NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### 2. Pets Table
Stores details about pets owned by users.

```sql
CREATE TABLE pets (
    pet_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    pet_name VARCHAR(50) NOT NULL,
    pet_type ENUM('dog', 'cat', 'bird', 'reptile', 'fish', 'other') NOT NULL,
    breed VARCHAR(50),
    age INT CHECK (age >= 0),
    weight DECIMAL(5,2) CHECK (weight >= 0),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

### 3. User Interactions Table
Tracks interactions between users and pets or products.

```sql
CREATE TABLE user_interactions (
    interaction_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    pet_id INT,
    interaction_type ENUM('like', 'comment', 'share', 'purchase') NOT NULL,
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (pet_id) REFERENCES pets(pet_id) ON DELETE CASCADE
);
```

### 4. Matchmaking Criteria Table
Stores preferences for matching pets with users, particularly for pet owners and children.

```sql
CREATE TABLE matchmaking_criteria (
    criteria_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    preferred_pet_type ENUM('dog', 'cat', 'bird', 'reptile', 'fish', 'any') NOT NULL,
    age_range_start INT CHECK (age_range_start >= 0),
    age_range_end INT CHECK (age_range_end > age_range_start),
    size_preference ENUM('small', 'medium', 'large', 'any') NOT NULL,
    activity_level ENUM('low', 'medium', 'high', 'any') NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

### 5. Sessions Table
Handles user sessions for authentication and tracking user logins.

```sql
CREATE TABLE sessions (
    session_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    session_token VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_accessed TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    expired BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

## Conclusion
This SQL schema provides a structured framework for an e-commerce platform focused on pet owners and children. The tables are interconnected through foreign keys, ensuring data integrity and facilitating various user interactions. This design will support scalability as the user base and data grow.